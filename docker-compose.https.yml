---

services:

  mcp-service:
    build: .
    container_name: mcp-mssql-service
    env_file:
      - .env
    environment:
      - MSSQL_SERVER=${MSSQL_SERVER}
      - MSSQL_PORT=${MSSQL_PORT:-1433}
      - MSSQL_DATABASE=${MSSQL_DATABASE}
      - MSSQL_USERNAME=${MSSQL_USERNAME}
      - MSSQL_PASSWORD=${MSSQL_PASSWORD}
    command: python main_sse.py
    networks:
      - mcp-network
    restart: unless-stopped

  nginx:
    image: nginx:alpine
    container_name: mcp-nginx
    ports:
      - "443:443"
      - "80:80"
    volumes:
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf:ro
      - ./certs:/etc/nginx/ssl:ro
    networks:
      - mcp-network
    restart: unless-stopped

networks:
  mcp-network:
    driver: bridge

volumes:
  mssql-data:
